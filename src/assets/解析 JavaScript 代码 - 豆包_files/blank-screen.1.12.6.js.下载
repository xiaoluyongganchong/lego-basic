!function(){"use strict";var B=function(){return(B=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var o in e=arguments[t])Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}).apply(this,arguments)};function I(n,e){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var r,o,i=t.call(n),u=[];try{for(;(void 0===e||0<e--)&&!(r=i.next()).done;)u.push(r.value)}catch(n){o={error:n}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return u}function N(){return{}}function t(n){return"object"==typeof n&&null!==n}function Y(n){return"function"==typeof n}var f=function(n,e,t,r){return n.destroyAgent.set(e,t,r)};function s(n,e){return n.initSubject(e)}function G(){return Date.now()}function F(){if("object"==typeof window&&t(window))return window}function z(){if("object"==typeof document&&t(document))return document}function r(){if(F()&&Y(window.PerformanceObserver))return window.PerformanceObserver}function u(n,e,t,r){return void 0===r&&(r=!1),n.addEventListener(e,t,r),function(){n.removeEventListener(e,t,r)}}function o(n,e,t){return n=I(a(n,e),3),e=n[0],n=n[2],e(t),n}var l=function(n,e){return t(n)?B(B({},e),n):!!n&&e},i=["resource"],c=["longtask"],a=function(r,o,i){var u=r&&new r(function(n,r){n.getEntries?n.getEntries().forEach(function(n,e,t){return o(n,e,t,r)}):i&&i()});return[function(n){if(!r||!u)return i&&i();try{u.observe({entryTypes:n})}catch(n){return i&&i()}},function(n,e){if(!r||!u)return i&&i();try{var t={type:n,buffered:!0};void 0!==e&&(t.durationThreshold=e),u.observe(t)}catch(n){return i&&i()}u.observe({type:n,buffered:!1})},function(){return u&&u.disconnect()}]},d=["longtask_0",function(n,e){var t=r();t&&e(o(t,n,c))}],v=["resource_0",function(n,e){var t=r();t&&e(o(t,n,i))}],W="js_error",$="http",J="resource_error",K="blank_screen";function Q(n,e){return~g.indexOf(n.tagName)||y<e}function V(n){return{width:(n=n.getBoundingClientRect()).width,height:n.height,top:n.top}}function X(n){return n?document.querySelector(n):document.body}function Z(t,r,n,o){if(void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=1.5),!t||Q(t,r)||o<=n)return n;var e=function(){if(!r)return 0;var n=V(t),e=n.top,n=n.height;return e>innerHeight||n<=0?0:1/(1<<r-1)}();return[].reduceRight.call(t.children,function(n,e){return Z(e,r+1,n,o)},n+e)}var m=["unload_0",function(n,e){var t,r,o,i,u,c=F();c&&(t=I((r=n,o=!1,[function(n){o||(o=!0,r&&r(n))}]),1)[0],i=function(){t()},u=[],["unload","beforeunload","pagehide"].forEach(function(n){var e,t,r,o;u.push((t=n,r=i,void 0===(o=!1)&&(o=!1),(e=c).addEventListener(t,r,o),function(){e.removeEventListener(t,r,o)}))}),e(function(){u.forEach(function(n){return n()})}))}],p=["domLoad_1",function(n,e){var t,r,o=F(),i=z();o&&i&&(t=!1,r=N,o=function(){setTimeout(function(){n(),t=!0},0)},"loading"!==i.readyState?o():r=u(i,"DOMContentLoaded",o,!1),e(function(){r()},function(n){t&&n()}))}],h=["activated_0",function(n,e){var t,r,o,i=z();i&&(t=!1,r=N,o=function(){n(),t=!0},i&&i.prerendering?r=u(i,"prerenderingchange",o,!0):o(),e(function(){r()},function(n){t&&n()}))}],g=["SCRIPT","STYLE","META","HEAD"],nn=[W,$,J],y=4,en=["performance","performance_longtask","performance_timing","custom"];function tn(n){var t=n.cb,e=n.screenshotUrl,r=n.window,o=n.document,i=n.mask,u=n.partialShot,c=n.quality,a=n.rootSelector;if(F()&&"Promise"in window&&Promise&&r&&o){if(r.html2canvas)return f(),0;n=o.createElement("script");n.src=e,null!==(e=o.head)&&void 0!==e&&e.appendChild(n),n.onload=f,n.onerror=function(){t()}}function f(){var e;((e=r).requestIdleCallback||function(n){return e.setTimeout(n,1)})(function(){r.html2canvas&&r.html2canvas(u&&a&&o.querySelector(a)||o.body,{scale:360/r.innerWidth,mask:i}).then(function(n){t("data:image"===(n=n.toDataURL("image/jpeg",c)).slice(0,10)?n:b())}).catch(function(){t(b())})})}}function b(n,e){void 0===n&&(n=192),void 0===e&&(e=108);var t=document.createElement("canvas");t.width=n,t.height=e;var r=t.getContext("2d");return r&&(r.fillStyle="#ffffff",r.fillRect(0,0,n,e)),t.toDataURL("image/jpeg")}var n,e,w,_=function(t,o,n,e){function r(n,e){C||(a=M())&&(C=!0,o.forEach(function(n){return n()}),o.length=0,t({ev_type:K,payload:{timestamp:a[0],score:a[1],screenshot:e,error:f,serialized_dom:function t(n,r,e){if(void 0===r&&(r=0),void 0===e&&(e=!0),!n||Q(n,r))return"";var o=B(B({},V(n)),{id:n.getAttribute("id"),class:n.getAttribute("class")}),i=Object.keys(o).reduce(function(n,e){return n+("number"==typeof o[e]||o[e]?" "+e+'="'+o[e]+'"':"")},""),u=n.tagName.toLowerCase(),n=[].reduce.call(n.children,function(n,e){return n+t(e,r+1,!1)},"");return"<"+u+i+(e?' innerHeight="'+innerHeight+'"':"")+">"+n+"</"+u+">"}(X(S))},overrides:{timestamp:n||a[0]}}))}function i(){d&&clearTimeout(d),s&&clearTimeout(s),s=A.setTimeout(function(){l=j(function(){(a=M())&&U()})},1e3)}var u,c,a,f,s,l,d,v,m,p=I(n,5),h=p[0],g=p[1],y=p[2],b=p[3],w=p[4],_=e.threshold,n=e.screenshot,S=e.rootSelector,p=e.autoDetect,T=e.ssUrl,E=e.quality,R=e.mask,D=e.partialShot,L=e.initDetTime,k=e.runDetTime,A=F(),O=z(),j=A.requestAnimationFrame||N,x=A.cancelAnimationFrame||N,q=I((u=performance,[c=u&&u.timing||void 0,function(){return u&&u.now?u.now():(Date.now?Date.now():+new Date)-(c&&c.navigationStart||0)},function(n){var e=(u||{}).getEntriesByType;return Y(e)&&e.call(u,n)||[]},function(){var n=(u||{}).clearResourceTimings;Y(n)&&n.call(u)},function(n){var e=(u||{}).getEntriesByName;return Y(e)&&e.call(u,n)||[]}]),2)[1],P=0,C=!1,H=!n,M=function(){var n=X(S);if(n){n=Z(n,0,0,_);return n<_?[G(),n]:void 0}},U=(v=function(){a&&!C&&(H?r():(H=!0,tn({cb:r.bind(null,G()),screenshotUrl:T,window:A,document:O,mask:R,partialShot:D,quality:E,rootSelector:S})))},function(){d&&clearTimeout(d),m=G(),d=A.setTimeout(function(){(m<P?i:v)()},1e4<q()?k:L)});return o.push(w[0](function(){f&&r()})),p&&o.push(h[0](function(){var n=g();o.push(n[0](function(){var n,t,n=I((n=function(){if(F()&&Y(window.MutationObserver))return window.MutationObserver}(),e=i,t=n&&new n(e),[function(n,e){t&&n&&t.observe(n,e)},function(){return t&&t.disconnect()}]),2),e=n[0],r=n[1];o.push(function(){clearTimeout(s),clearTimeout(d),x(l),r&&r()}),e(null===(e=z())||void 0===e?void 0:e.body,{subtree:!0,childList:!0}),o.push(y()[0](function(){s&&i()})),o.push(b()[0](function(){s&&i()})),i()}))})),[function(n){C||~en.indexOf(n.ev_type)||(P=G(),f=function(n,e){if(-1===nn.indexOf(e.ev_type))return n;if(e.ev_type===$&&e.payload.response.status<400)return n;if(n&&nn.indexOf(n.type)<nn.indexOf(e.ev_type))return n;var t="";switch(e.ev_type){case W:t=e.payload.error.message;break;case $:t=e.payload.request.url;break;case J:t=e.payload.url}return{type:e.ev_type,message:t,timestamp:G()}}(f=f&&1e4<P-f.timestamp?void 0:f,n))},i]},S="blankScreen";e=(null===(n=function(){if(!document)return null;if(document.currentScript)return document.currentScript;try{throw new Error}catch(n){var e=0,t=/at\s+(.*)\s+\((.*):(\d*):(\d*)\)/i.exec(n.stack),r=t&&t[2]||!1,o=t&&t[3]||0,i=document.location.href.replace(document.location.hash,""),u="",c=document.getElementsByTagName("script");for(r===i&&(t=document.documentElement.outerHTML,o=new RegExp("(?:[^\\n]+?\\n){0,"+(o-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),u=t.replace(o,"$1").trim());e<c.length;e++){if("interactive"===c[e].readyState)return c[e];if(c[e].src===r)return c[e];if(r===i&&c[e].innerHTML&&c[e].innerHTML.trim()===u)return c[e]}return null}}())||void 0===n?void 0:n.getAttribute("src"))||"",(w=z())&&e&&((w=w.createElement("a")).href=e,"/"!==(e=w.pathname||"/")[0]&&(e="/"+e),w.href,w.protocol.slice(0,-1),w.hostname,w.search.substring(1),w.hash);var T,E,R,D,L="1.12.6";T=S,E=function(c,a){c.on("init",function(){var n,e,t,r,o,i={autoDetect:!0,threshold:1.5,screenshot:!0,mask:!1,ssUrl:c.config().pluginPathPrefix+"/screenshot.min.js",partialShot:!0,quality:.1,initDetTime:8e3,runDetTime:4e3},u=a?l(a,i):(e=S,o=i,e=null===(u=(u=c).config())||void 0===u?void 0:u.plugins[e],l(e,o));u&&(n=c,e=u,o=z(),u=F(),o&&u&&(u=[],e=I(_(n.report.bind(n),u,[s(n,h),function(){return s(n,p)},function(){return s(n,d)},function(){return s(n,v)},s(n,m)],e),2),t=e[0],e=e[1],n.on("report",r=function(n){return t(n),n}),u.push(function(){n.off("report",r)}),f(n,S,K,u),n.provide("detectBlankScreen",e)))})},(R=void 0===R?function(n){if(n)return n.__SLARDAR_REGISTRY__||(n.__SLARDAR_REGISTRY__={Slardar:{plugins:[],errors:[],subject:{}}}),n.__SLARDAR_REGISTRY__.Slardar}(F()):R)&&R.plugins&&(D=T,R.plugins.filter(function(n){return n.name===D&&n.version===L})[0]||R.plugins.push({name:T,version:L,apply:E}))}();
